% cv.sty
\ProvidesPackage{cv}

% define colors
\RequirePackage{xcolor}
\definecolor{accent}{HTML}{245998}
\definecolor{white}{HTML}{FFFFFF}
\definecolor{black}{HTML}{000000}

\lightercolor{accent}{25}{lightaccent}
\lightercolor{accent}{50}{darkaccent}
\lightercolor{black}{50}{halfblack}

% set paragraph indent, skip to zero
\setlength{\parindent}{0pt}
\setlength{\parskip}{0pt}
\setlength{\baselineskip}{0pt}

% set up hypperef links
\hypersetup{
    colorlinks,
    breaklinks,
    urlcolor=accent,
    linkcolor=accent,
}

% todo: underline all links (but not the chain icon)
% \makeatletter
% \patchcmd{\hyper@link@}
%   {{\Hy@tempb}{#4}}
%   {{\Hy@tempb}{\underline{#4}}}
%   {}{}
% \makeatother

% style section headings
\RequirePackage{titlesec}
\RequirePackage{multicol}
\RequirePackage{multirow}
% \titleformat{⟨command⟩}[⟨shape⟩]{⟨format⟩}{⟨label⟩}{⟨sep⟩}{⟨before-code⟩}[⟨after-code⟩]
\titleformat{\section}[block]{\color{accent}\large\scshape\raggedright}{}{0em}{}[\titlerule]

\titlespacing{\section}{0pt}{2pt}{\defaultvspacing} % left, before, after

% add space before printbibliography text
\renewcommand{\bibsetup}{}

% make it so that unpublished bib entries are treated as misc
\DeclareBibliographyAlias{unpublished}{misc}

\DeclareSourcemap{
  \maps{
    \map{
      \step[typesource=unpublished, typetarget=misc]
    }
  }
}

% fields that you don't want shown in the references
\AtEveryBibitem{
    \clearlist{address}
    % \clearfield{date}
    \clearfield{eprint}
    %  \clearfield{isbn}
    %  \clearfield{issn}
    % \clearlist{location}
    \clearfield{month}
    \clearfield{series}
    \clearlist{language}
    \clearfield{issue}
    %  all three of these must be included to remove (visited on ...)
    \clearfield{urldate}
    \clearfield{urlyear}
    \clearfield{urlmonth}
}